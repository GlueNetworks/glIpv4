/*! 
  glIpv4 v(0.0.9) 
  (c) 2013-2015
  https://gluenetworks.kilnhg.com/Code/Web-Development
  Release Date: 2015-03-12 
*/

angular.module("glIpv4", [ "glTextfield" ]), angular.module("glIpv4").directive("glIpv4", [ "$compile", "$timeout", function(a) {
    "use strict";
    return {
        restrict: "EA",
        replace: !0,
        scope: {
            settings: "=",
            api: "="
        },
        link: function(b, c) {
            // period tabs to next field
            function d(a) {
                190 == a.keyCode && (a.preventDefault(), q[1].find("input").focus());
            }
            function e(a) {
                190 == a.keyCode && (a.preventDefault(), q[2].find("input").focus());
            }
            function f(a) {
                190 == a.keyCode && (a.preventDefault(), q[3].find("input").focus());
            }
            function g(a) {
                190 == a.keyCode && a.preventDefault();
            }
            // set segment model values
            function h() {
                b.api._data.ipSegments[0] = b.api1.getValue();
            }
            function i() {
                b.api._data.ipSegments[1] = b.api2.getValue();
            }
            function j() {
                b.api._data.ipSegments[2] = b.api3.getValue();
            }
            function k() {
                b.api._data.ipSegments[3] = b.api4.getValue();
            }
            var l, m, n, o, p, q = [];
            b.api = b.api || {}, b.api._data = {}, b.api._data.capsLocked = !1, b.api._data.numberMouseOverSpinner = !1;
            var r = "gl-textfield-error", s = "gl-textfield-view-label", t = "gl-textfield-view-value";
            b.api1 = {}, b.api2 = {}, b.api3 = {}, b.api4 = {}, b.api._data.name = angular.isUndefined(b.settings.name) ? void 0 : b.settings.name, 
            b.settings1 = {
                name: "gl-" + b.api._data.name + "-ipv4-seg-1",
                type: "number",
                numberSpinner: !1,
                onKeyUp: h,
                onKeyDown: d
            }, b.settings2 = {
                nane: "gl-" + b.api._data.name + "-ipv4-seg-2",
                type: "number",
                numberSpinner: !1,
                onKeyUp: i,
                onKeyDown: e
            }, b.settings3 = {
                name: "gl-" + b.api._data.name + "-ipv4-seg-3",
                type: "number",
                numberSpinner: !1,
                onKeyUp: j,
                onKeyDown: f
            }, b.settings4 = {
                name: "gl-" + b.api._data.name + "-ipv4-seg-4",
                type: "number",
                numberSpinner: !1,
                onKeyUp: k,
                onKeyDown: g
            };
            var u = [ '<gl-textfield class="gl-ipv4-1" api="api1" settings="settings1" >', '<gl-textfield class="gl-ipv4-2" api="api2" settings="settings2" >', '<gl-textfield class="gl-ipv4-3" api="api3" settings="settings3" >', '<gl-textfield class="gl-ipv4-4" api="api4" settings="settings4" >' ], v = '<div class="gl-ipv4-inputs"></div>', w = '<p class="' + r + '">{{api._data.error}}</p>', x = '<label class="' + s + '">{{api._data.label}}</label>', y = '<p class="' + t + '"></p>', z = '<span class="gl-ipv4-segment-separator">.</span>';
            // MAP SETTINGS
            b.api._data.ipSegments = angular.isUndefined(b.settings.value) ? [] : b.settings.value.split("."), 
            b.api._data.valid = angular.isUndefined(b.settings.valid) ? !0 : b.settings.valid, 
            b.api._data.label = angular.isUndefined(b.settings.label) ? void 0 : b.settings.label, 
            b.api._data.disabled = angular.isUndefined(b.settings.disabled) ? !1 : b.settings.disabled, 
            b.api._data.placeholder = angular.isUndefined(b.settings.placeholder) ? void 0 : b.settings.placeholder, 
            b.api._data.error = angular.isUndefined(b.settings.error) ? void 0 : b.settings.error, 
            b.api._data.editable = angular.isUndefined(b.settings.editable) ? !0 : b.settings.editable, 
            b.api.setInvalid = function(a) {
                b.api._data.valid = !1, b.api1.setInvalid(), b.api2.setInvalid(), b.api3.setInvalid(), 
                b.api4.setInvalid(), b.api._data.error = angular.isString(a) ? a : void 0, D();
            }, b.api.setValid = function() {
                b.api._data.valid = !0, b.api1.setValid(), b.api2.setValid(), b.api3.setValid(), 
                b.api4.setValid(), D();
            }, b.api.setValue = function(a) {
                angular.isUndefined(a) || angular.isString(a) && 0 == a.length ? (b.api1.setValue(), 
                b.api2.setValue(), b.api3.setValue(), b.api4.setValue()) : (b.api._data.ipSegments = a.split("."), 
                angular.isUndefined(b.api._data.ipSegments) || (angular.isUndefined(parseInt(b.api._data.ipSegments[0])) || b.api1.setValue(parseInt(b.api._data.ipSegments[0])), 
                angular.isUndefined(parseInt(b.api._data.ipSegments[1])) || b.api2.setValue(parseInt(b.api._data.ipSegments[1])), 
                angular.isUndefined(parseInt(b.api._data.ipSegments[2])) || b.api3.setValue(parseInt(b.api._data.ipSegments[2])), 
                angular.isUndefined(parseInt(b.api._data.ipSegments[3])) || b.api4.setValue(parseInt(b.api._data.ipSegments[3])))), 
                // update view  mode
                angular.isUndefined(o) || o.html(b.api.getValue());
            }, b.api.getValue = function() {
                return b.api._data.ipSegments.join(".");
            }, b.api.setPlaceholder = function(a) {
                b.api._data.placeholder = a, b.api1.setPlaceholder(a);
            }, b.api.getPlaceholder = function() {
                return b.api._data.placeholder;
            }, b.api.setLabel = function(a) {
                b.api._data.label = a;
            }, b.api.getLabel = function() {
                return b.api._data.label;
            }, b.api.view = function() {
                B();
            }, b.api.edit = function() {
                C();
            }, b.api.disable = function() {
                b.api._data.disabled = !0, b.api1.disable(), b.api2.disable(), b.api3.disable(), 
                b.api4.disable();
            }, b.api.enable = function() {
                b.api._data.disabled = !1, b.api1.enable(), b.api2.enable(), b.api3.enable(), b.api4.enable();
            };
            var A = function() {
                l = angular.element(v), p = angular.element(z);
                for (var c = 0; c < u.length; c++) {
                    var d = u[c], e = angular.element(d);
                    q[c] = e, l.append(q[c]), 3 > c && l.append(p.clone());
                }
                var f = a(l)(b);
                return b.api._data.disabled && b.api.disable(), f;
            }, B = function() {
                b.api._data.editable = !1, c.children().remove(), angular.isString(b.api._data.label) && (n = a(angular.element(x))(b), 
                c.append(n)), o = a(angular.element(y))(b), o.html(b.api.getValue()), c.append(o);
            }, C = function() {
                b.api._data.editable = !0, c.children().remove(), c.append(A());
                var a = b.api.getValue();
                // init validity
                if (b.api.setValue(a), b.api._data.valid) b.api.setValid(); else {
                    var d = angular.isString(b.api._data.error) ? b.api._data.error : void 0;
                    b.api.setInvalid(d);
                }
                D();
            }, D = function() {
                angular.isUndefined(m) || m.remove(), b.api._data.editable && !b.api._data.valid && angular.isString(b.api._data.error) && (m = a(angular.element(w))(b), 
                c.append(m));
            };
            // INIT
            angular.isString(b.api._data.placeholder) && (b.settings1.placeholder = b.api._data.placeholder), 
            angular.isUndefined(b.settings.view) || 1 != b.settings.view ? C() : B();
        }
    };
} ]);
//# sourceMappingURL=glipv4.min.js.map